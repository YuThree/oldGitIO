<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="/Lib/bootstrap/css/bootstrap-cerulean-zzj.css" rel="stylesheet" type="text/css" />
    <link href="/Lib/bootstrap/css/bootstrap-responsive.css" rel="stylesheet" type="text/css" />
    <link href="/Lib/bootstrap/css/charisma-app.css" rel="stylesheet" type="text/css" />
    <link href="/Lib/jquery-ui-1.8.21.custom/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css" />
    <link href='/Lib/fullcalendar/fullcalendar.css' rel='stylesheet' type="text/css" />
    <link href='/Lib/fullcalendar/fullcalendar.print.css' rel='stylesheet' media='print' type="text/css" />
    <link href='/Lib/jquery.chosen/chosen.css' rel='stylesheet' type="text/css" />
    <link href='/Lib/jquery.uniform/uniform.default.css' rel='stylesheet' type="text/css" />
    <link href='/Lib/jquery.colorbox/colorbox.css' rel='stylesheet' type="text/css" />
    <link href='/Lib/jquery.cleditor/jquery.cleditor.css' rel='stylesheet' type="text/css" />
    <link href='/Lib/jquery.noty/jquery.noty.css' rel='stylesheet' type="text/css" />
    <link href='/Lib/jquery.noty/noty_theme_default.css' rel='stylesheet' type="text/css" />
    <link href='/Lib/jquery.elfinder/elfinder.min.css' rel='stylesheet' type="text/css" />
    <link href='/Lib/jquery.elfinder/elfinder.theme.css' rel='stylesheet' type="text/css" />
    <link href='/Lib/jquery.iphone.toggle/jquery.iphone.toggle.css' rel='stylesheet' type="text/css" />
    <link href='/Lib/bootstrap/css/opa-icons.css' rel='stylesheet' type="text/css" />
    <link href='/Lib/jquery.uploadify-3.1/uploadify.css' rel='stylesheet' type="text/css" />
    <link href="/Lib/flexigrid/flexigrid.pack.css" rel="stylesheet" type="text/css" />
    <link href="/Lib/zTree/zTreeStyle.css" rel="stylesheet" type="text/css" />
    <link href="/Lib/ymPrompt/skin/qq/ymPrompt.css" rel="stylesheet" type="text/css" />
    <script src="/Lib/jquery-1.7.2/jquery-1.7.2.min.js" type="text/javascript"></script>
    <!-- jQuery UI -->
    <script src="/Lib/jquery-ui-1.8.21.custom/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
    <!-- 过滤/效果库 -->
    <script src="/Lib/bootstrap/bootstrap-transition.js" type="text/javascript"></script>
    <!-- 弹出框/效果库 -->
    <script src="/Lib/bootstrap/bootstrap-alert.js" type="text/javascript"></script>
    <!-- modal / dialog library -->
    <script src="/Lib/bootstrap/bootstrap-modal.js" type="text/javascript"></script>
    <!-- 下拉列表库 -->
    <script src="/Lib/bootstrap/bootstrap-dropdown.js" type="text/javascript"></script>
    <!-- scrolspy library -->
    <script src="/Lib/bootstrap/bootstrap-scrollspy.js" type="text/javascript"></script>
    <!-- TAB库 -->
    <script src="/Lib/bootstrap/bootstrap-tab.js" type="text/javascript"></script>
    <!-- library for advanced tooltip -->
    <script src="/Lib/bootstrap/bootstrap-tooltip.js" type="text/javascript"></script>
    <!-- popover effect library -->
    <script src="/Lib/bootstrap/bootstrap-popover.js" type="text/javascript"></script>
    <!-- button enhancer library -->
    <script src="/Lib/bootstrap/bootstrap-button.js" type="text/javascript"></script>
    <!-- accordion library (optional, not used in demo) -->
    <script src="/Lib/bootstrap/bootstrap-collapse.js" type="text/javascript"></script>
    <!-- carousel slideshow library (optional, not used in demo) -->
    <script src="/Lib/bootstrap/bootstrap-carousel.js" type="text/javascript"></script>
    <!-- autocomplete library -->
    <script src="/Lib/bootstrap/bootstrap-typeahead.js" type="text/javascript"></script>
    <!-- tour library -->
    <script src="/Lib/bootstrap/bootstrap-tour.js" type="text/javascript"></script>
    <!-- library for cookie management -->
    <script src="/Lib/jquery.cookie/jquery.cookie.js" type="text/javascript"></script>
    <!-- calander plugin -->
    <script src='/Lib/fullcalendar/fullcalendar.min.js' type="text/javascript"></script>
    <!-- data table plugin -->
    <script src='/Lib/jquery.dataTables/jquery.dataTables.min.js' type="text/javascript"></script>
    <!-- chart libraries start -->
    <script src="/Lib/jquery.jqplot/excanvas.js" type="text/javascript"></script>
    <script src="/Lib/jquery.flot/jquery.flot.min.js" type="text/javascript"></script>
    <script src="/Lib/jquery.flot/jquery.flot.pie.min.js" type="text/javascript"></script>
    <script src="/Lib/jquery.flot/jquery.flot.stack.js" type="text/javascript"></script>
    <script src="/Lib/jquery.flot/jquery.flot.resize.min.js" type="text/javascript"></script>
    <!-- chart libraries end -->
    <!-- select or dropdown enhancer -->
    <script src="/Lib/jquery.chosen/jquery.chosen.min.js" type="text/javascript"></script>
    <!-- checkbox, radio, and file input styler -->
    <script src="/Lib/jquery.uniform/jquery.uniform.min.js" type="text/javascript"></script>
    <!-- plugin for gallery image view -->
    <script src="/Lib/jquery.colorbox/jquery.colorbox.min.js" type="text/javascript"></script>
    <!-- rich text editor library -->
    <script src="/Lib/jquery.cleditor/jquery.cleditor.min.js" type="text/javascript"></script>
    <!-- notification plugin -->
    <script src="/Lib/jquery.noty/jquery.noty.js" type="text/javascript"></script>
    <!-- file manager library -->
    <script src="/Lib/jquery.elfinder/jquery.elfinder.min.js" type="text/javascript"></script>
    <!-- star rating plugin -->
    <script src="/Lib/jquery.raty/jquery.raty.min.js" type="text/javascript"></script>
    <!-- for iOS style toggle switch -->
    <script src="/Lib/jquery.iphone.toggle/jquery.iphone.toggle.js" type="text/javascript"></script>
    <!-- autogrowing textarea plugin -->
    <script src="/Lib/jquery.autogrow-textarea/jquery.autogrow-textarea.js" type="text/javascript"></script>
    <!-- multiple file upload plugin -->
    <script src="/Lib/jquery.uploadify-3.1/jquery.uploadify-3.1.min.js" type="text/javascript"></script>
    <!-- history.js for cross-browser state change on ajax -->
    <script src="/Lib/jquery.history/jquery.history.js" type="text/javascript"></script>
    <!-- application script for Charisma demo -->
    <script src="/Lib/bootstrap/bootstrap/charisma.js" type="text/javascript"></script>
    <!-- 日期控件 -->
    <script src="/Lib/My97DatePicker/WdatePicker.js" type="text/javascript"></script>
    <!--引用调后台方法JS-->
    <script src="/Common/js/6cweb/xmlHttpHelper.js" type="text/javascript"></script>
    <!--全局JS-->
    <script src="/Common/js/6cweb/MasterJs.js" type="text/javascript"></script>
    <script src="/Lib/ymPrompt/ymPrompt.js" type="text/javascript"></script>
    <script src="/Lib/flexigrid/flexigrid.pack.js" type="text/javascript"></script>
    <link href="/C3/PC/MRTA/css/mrta_big.css" rel="stylesheet" type="text/css" />
    <script src="/Common/MTask/JS/MrtaTaskList.js" type="text/javascript"></script>
    <style type="text/css">
        #content
        {
            width: 400px;
            height: 200px;
        }
        
        #tab_bar
        {
            width: 400px;
            height: 20px;
            float: left;
        }
        #tab_bar ul
        {
            padding: 0px;
            margin: 0px;
            height: 20px;
            text-align: center;
        }
        
        #tab_bar li
        {
            list-style-type: none;
            float: left;
            width: 98px;
            height: 20px;
            background-color: #000;
        }
        
        .tab_css
        {
            width: 400px;
            height: 200px;
            background-color: #000;
            display: none;
            float: left;
        }
    </style>
    <script type="text/javascript">

        $(function () {

            //            var vh = $(window).height() - 50;
            //            $('#modal-container-22256').height(vh)
            //     
            var _h = parseInt($(window).height());
            var _w = parseInt($(window).width());

            var fz = $(window).height() * 0.016104 * 4;
            $('.boxTitle_loca2').width(_w).height(_h / 8).css("font-size", fz + "px");
            $('#url').height($('#modal-container-22256').height() - 50);
            $('.tab_css').width(_w);
            $('#btn_fb').click(function () {
                window.parent.window.parent.ShowMTwin("/C3/PC/MRTA/FXGIS.html?1=1&Category_Code=3C&v=" + version, "96", "99");
            })
            loadMrtaTaskFlexiGrid();
            loadMrtaXGTaskFlexiGrid();
            loadMrtaLSTaskFlexiGrid();
            loadMrtaCSTaskFlexiGrid();
        })
        function RefsetMrta() {

            var showtime = 5000; //提示时间
            var setshow = setInterval('show_pop()', showtime);
        }

        var displayStr = "";
        function GetDBTaskList(DBjson) {

            var DBresult = '';

            // var DBjson = loadMrtaTaskFlexiGrid();

            //   json.rows[0].SEVERITY


            for (var i = 0; i < DBjson.rows.length; i++) {
                DBresult += "<div class='alarmItem' id='" + DBjson.rows[i].ID + "' status='" + DBjson.rows[i].ID + "' " + displayStr + " >\
    <div class='m_taskCode d'  title='" + DBjson.rows[i].TASK_CODE + "'>" + DBjson.rows[i].TASK_CODE + "</div>\
    <div class='m_taskdescript d'  title='" + DBjson.rows[i].TASK_DESCRIPT + "'>" + DBjson.rows[i].TASK_DESCRIPT + "</div>\
    <div class='m_severity  d'  title='" + DBjson.rows[i].SEVERITY + "'>" + DBjson.rows[i].SEVERITY + "</div>\
    <div class='m_deptname d' title='" + DBjson.rows[i].SPONSOR_DEPTNAME + "'>" + DBjson.rows[i].SPONSOR_DEPTNAME + "</div>\
    <div class='m_sponsorname d' title='" + DBjson.rows[i].SPONSORNAME + "'>" + DBjson.rows[i].SPONSORNAME + "</div>\
    <div class='m_cz d' data-toggle='tooltip' title=''>" + DBjson.rows[i].CZ + "</div>\
    <div class='cls'></div>\
    <div style='display:none' class='m_task d' title='" + "1" + "'>" + "1" + "</div>\
</div>";

            }






            $('#DBTask').html(DBresult);



        }

        function GetXGTaskList(XGjson) {
            //  var XGjson = loadMrtaXGTaskFlexiGrid();

            //   json.rows[0].SEVERITY
            var XGresult = '';

            for (var i = 0; i < XGjson.rows.length; i++) {
                XGresult += "<div class='alarmItem' id='" + XGjson.rows[i].ID + "' status='" + XGjson.rows[i].ID + "' " + displayStr + " >\
    <div class='m_taskCode d'  title='" + XGjson.rows[i].TASK_CODE + "'>" + XGjson.rows[i].TASK_CODE + "</div>\
    <div class='m_taskdescript d'  title='" + XGjson.rows[i].TASK_DESCRIPT + "'>" + XGjson.rows[i].TASK_DESCRIPT + "</div>\
    <div class='m_severity  d'  title='" + XGjson.rows[i].SEVERITY + "'>" + XGjson.rows[i].SEVERITY + "</div>\
    <div class='m_deptname d' title='" + XGjson.rows[i].SPONSOR_DEPTNAME + "'>" + XGjson.rows[i].SPONSOR_DEPTNAME + "</div>\
    <div class='m_sponsorname d' title='" + XGjson.rows[i].SPONSORNAME + "'>" + XGjson.rows[i].SPONSORNAME + "</div>\
    <div class='m_cz d' data-toggle='tooltip' title=''>" + XGjson.rows[i].CZ + "</div>\
    <div class='cls'></div>\
    <div style='display:none' class='m_task d' title='" + "1" + "'>" + "1" + "</div>\
</div>";

            }
            $('#XGTask').html(XGresult);

            //   json.rows[0].SEVERITY

        }

        function GetLSTaskList(LSjson) {

            var LSresult = '';
            //var LSjson = loadMrtaLSTaskFlexiGrid();

            for (var i = 0; i < LSjson.rows.length; i++) {
                LSresult += "<div class='alarmItem' id='" + LSjson.rows[i].ID + "' status='" + LSjson.rows[i].ID + "' " + displayStr + " >\
    <div class='m_taskCode d'  title='" + LSjson.rows[i].TASK_CODE + "'>" + LSjson.rows[i].TASK_CODE + "</div>\
    <div class='m_taskdescript d'  title='" + LSjson.rows[i].TASK_DESCRIPT + "'>" + LSjson.rows[i].TASK_DESCRIPT + "</div>\
    <div class='m_severity  d'  title='" + LSjson.rows[i].SEVERITY + "'>" + LSjson.rows[i].SEVERITY + "</div>\
    <div class='m_deptname d' title='" + LSjson.rows[i].SPONSOR_DEPTNAME + "'>" + LSjson.rows[i].SPONSOR_DEPTNAME + "</div>\
    <div class='m_sponsorname d' title='" + LSjson.rows[i].SPONSORNAME + "'>" + LSjson.rows[i].SPONSORNAME + "</div>\
    <div class='m_cz d' data-toggle='tooltip' title=''>" + LSjson.rows[i].CZ + "</div>\
    <div class='cls'></div>\
    <div style='display:none' class='m_task d' title='" + "1" + "'>" + "1" + "</div>\
     <div class='m_FalutID d'  style='display:none' data-toggle='tooltip' title=''>" + LSjson.rows[i].FAULTID + "</div>\
      <div class='m_code d' style='display:none' data-toggle='tooltip' title=''>" + LSjson.rows[i].CATEGORY_CODE + "</div>\
</div>";

            }
            $('#LSTask').html(LSresult);
        }
        function GetCSTaskList(CSjson) {
            // var CSjson = loadMrtaCSTaskFlexiGrid();

            //   json.rows[0].SEVERITY

            var CSresult = '';

            for (var i = 0; i < CSjson.rows.length; i++) {
                CSresult += "<div class='alarmItem' id='" + CSjson.rows[i].ID + "' status='" + CSjson.rows[i].ID + "' " + displayStr + " >\
    <div class='m_taskCode d'  title='" + CSjson.rows[i].TASK_CODE + "'>" + CSjson.rows[i].TASK_CODE + "</div>\
    <div class='m_taskdescript d'  title='" + CSjson.rows[i].TASK_DESCRIPT + "'>" + CSjson.rows[i].TASK_DESCRIPT + "</div>\
    <div class='m_severity  d'  title='" + CSjson.rows[i].SEVERITY + "'>" + CSjson.rows[i].SEVERITY + "</div>\
    <div class='m_deptname d' title='" + CSjson.rows[i].SPONSOR_DEPTNAME + "'>" + CSjson.rows[i].SPONSOR_DEPTNAME + "</div>\
    <div class='m_sponsorname d' title='" + CSjson.rows[i].SPONSORNAME + "'>" + CSjson.rows[i].SPONSORNAME + "</div>\
    <div class='m_cz d' data-toggle='tooltip' title=''>" + CSjson.rows[i].CZ + "</div>\
    <div class='cls'></div>\
    <div style='display:none' class='m_task d' title='" + "1" + "'>" + "1" + "</div>\
</div>";

            }

            $('#CSTask').html(CSresult);
        }
        function openMisTask(rows) {
            var url = "/Common/MTask/TaskForm.htm?id=" + rows.id + "&type=openMisTask&Task=MrtaTask&v=" + version;
            // window.open(url);
            window.parent.window.parent.ShowMTwin(url, "85", "80");
        }

        function openMisTaskTrac(rows) {
            var url = "/Common/MTask/TaskTracList.htm?id=" + rows.id + "&type=taskTracgrid&v=" + version;
            //   window.open(url);
            window.parent.window.parent.ShowMTwin(url, "85", "80");
        }

        //弹出相关任务详情
        function openSelfMisTask(rows) {
            var url = "/Common/MTask/TaskForm.htm?id=" + rows.id + "&type=openSelfMisTask&v=" + version;
            // window.open(url);
            window.parent.window.parent.ShowMTwin(url, "85", "80");
        }

        //弹出检修复核
        function openFaultFh(rows) {
            var url = "";

            url = "../../6C/PC/MFault/FHForm.htm?alarmid=" + $('div', rows)[8].innerHTML.replace("&nbsp;", "") + "&type=" + $('div', rows)[9].innerHTML.replace("&nbsp;", "") + '&v=' + version;

            window.open(url, "_blank");
        }

        var myclick = function (v) {
            var llis = document.getElementsByTagName("li");
            for (var i = 0; i < llis.length; i++) {
                var lli = llis[i];
                if (lli == document.getElementById("tab" + v)) {
                    lli.style.backgroundColor = "White";
                } else {
                    lli.style.backgroundColor = "#000";
                }
            }

            var divs = document.getElementsByClassName("tab_css");
            for (var i = 0; i < divs.length; i++) {

                var divv = divs[i];

                if (divv == document.getElementById("tab" + v + "_content")) {
                    divv.style.display = "block";
                } else {
                    divv.style.display = "none";
                }
            }

        }  

    </script>
</head>
<body runat="server" onload="RefsetMrta()">
    <div id="t_report">
        <div class="boxTitle_loca2">
            <div class="boxTitle_loca_1 posistionR fg_blue">
                任务信息
                <input id="btn_fb" type="button" value="分布图" />
            </div>
        </div>
        <div id="content">
            <div id="tab_bar">
                <ul>
                    <li id="tab1" onclick="myclick(1)" style="background-color: White"><a href="#">待办任务</a>
                    </li>
                    <li id="tab2" onclick="myclick(2)"><a href="#">相关任务</a> </li>
                    <li id="tab3" onclick="myclick(3)"><a href="#">历史任务</a> </li>
                    <li id="tab4" onclick="myclick(4)"><a href="#">抄送任务</a> </li>
                </ul>
            </div>
            <div class="tab_css" id="tab1_content" style="display: block">
                <div class="box1_1">
                    <div class="title_bg">
                        <div class="m_taskCode d fg_blue">
                            任务编号</div>
                        <div class="m_taskdescript  d fg_blue">
                            任务描述</div>
                        <div class="m_severity d fg_blue">
                            等级</div>
                        <div class="m_deptname d fg_blue">
                            发起机构</div>
                        <div class='m_sponsorname d fg_blue'>
                            发起人</div>
                        <div class='m_cz d fg_blue'>
                            操作</div>
                        <div class="cls">
                        </div>
                        <div style="display: none">
                        </div>
                    </div>
                    <div id="DBTask">
                        <img src="/Common/img/loading1.gif" align="absmiddle" />
                    </div>
                </div>
            </div>
            <div class="tab_css" id="tab2_content">
                <div class="box1_1">
                    <div class="title_bg">
                        <div class="m_taskCode d fg_blue">
                            任务编号</div>
                        <div class="m_taskdescript  d fg_blue">
                            任务描述</div>
                        <div class="m_severity d fg_blue">
                            等级</div>
                        <div class="m_deptname d fg_blue">
                            发起机构</div>
                        <div class='m_sponsorname d fg_blue'>
                            发起人</div>
                        <div class='m_cz d fg_blue'>
                            操作</div>
                        <div class="cls">
                        </div>
                        <div style="display: none">
                        </div>
                    </div>
                    <div id="XGTask">
                        <img src="/Common/img/loading1.gif" align="absmiddle" />
                    </div>
                </div>
            </div>
            <div class="tab_css" id="tab3_content">
                <div class="box1_1">
                    <div class="title_bg">
                        <div class="m_taskCode d fg_blue">
                            任务编号</div>
                        <div class="m_taskdescript  d fg_blue">
                            任务描述</div>
                        <div class="m_severity d fg_blue">
                            等级</div>
                        <div class="m_deptname d fg_blue">
                            发起机构</div>
                        <div class='m_sponsorname d fg_blue'>
                            发起人</div>
                        <div class='m_cz d fg_blue'>
                            操作</div>
                        <div class="cls">
                        </div>
                        <div style="display: none">
                        </div>
                        <div class='m_FalutID d fg_blue' style="display: none">
                        </div>
                        <div class='m_code d fg_blue' style="display: none">
                        </div>
                    </div>
                    <div id="LSTask">
                        <img src="/Common/img/loading1.gif" align="absmiddle" />
                    </div>
                </div>
            </div>
            <div class="tab_css" id="tab4_content">
                <div class="box1_1">
                    <div class="title_bg">
                        <div class="m_taskCode d fg_blue">
                            任务编号</div>
                        <div class="m_taskdescript  d fg_blue">
                            任务描述</div>
                        <div class="m_severity d fg_blue">
                            等级</div>
                        <div class="m_deptname d fg_blue">
                            发起机构</div>
                        <div class='m_sponsorname d fg_blue'>
                            发起人</div>
                        <div class='m_cz d fg_blue'>
                            操作</div>
                        <div class="cls">
                        </div>
                        <div style="display: none">
                        </div>
                    </div>
                    <div id="CSTask">
                        <img src="/Common/img/loading1.gif" align="absmiddle" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
