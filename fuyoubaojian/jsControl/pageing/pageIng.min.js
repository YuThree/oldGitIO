!function(b){b.jqPaginator=function(a,f){if(!(this instanceof b.jqPaginator)){return new b.jqPaginator(a,f)}var e=this;return e.$container=b(a),e.$container.data("jqPaginator",e),e.init=function(){(f.first||f.prev||f.next||f.last||f.page)&&(f=b.extend({},{first:"",prev:"",next:"",last:"",page:""},f)),e.options=b.extend({},b.jqPaginator.defaultOptions,f),e.verify(),e.extendJquery(),e.render(),e.fireEvent(this.options.currentPage,"init")},e.verify=function(){var c=e.options;if(!e.isNumber(c.totalPages)){throw new Error("[jqPaginator] type error: totalPages")}if(!e.isNumber(c.totalCounts)){throw new Error("[jqPaginator] type error: totalCounts")}if(!e.isNumber(c.pageSize)){throw new Error("[jqPaginator] type error: pageSize")}if(!e.isNumber(c.currentPage)){throw new Error("[jqPaginator] type error: currentPage")}if(!e.isNumber(c.visiblePages)){throw new Error("[jqPaginator] type error: visiblePages")}if(!c.totalPages&&!c.totalCounts){throw new Error("[jqPaginator] totalCounts or totalPages is required")}if(!c.totalPages&&!c.totalCounts){throw new Error("[jqPaginator] totalCounts or totalPages is required")}if(!c.totalPages&&c.totalCounts&&!c.pageSize){throw new Error("[jqPaginator] pageSize is required")}if(c.totalCounts&&c.pageSize&&(c.totalPages=Math.ceil(c.totalCounts/c.pageSize)),c.currentPage<1||c.currentPage>c.totalPages){throw new Error("[jqPaginator] currentPage is incorrect")}if(c.totalPages<1){throw new Error("[jqPaginator] totalPages cannot be less currentPage")}},e.extendJquery=function(){b.fn.jqPaginatorHTML=function(c){return c?this.before(c).remove():b("<p>").append(this.eq(0).clone()).html()}},e.render=function(){e.renderHtml(),e.setStatus(),e.bindEvents()},e.renderHtml=function(){for(var g=[],k=e.getPages(),i=0,h=k.length;h>i;i++){g.push(e.buildItem("page",k[i]))}e.isEnable("prev")&&g.unshift(e.buildItem("prev",e.options.currentPage-1)),e.isEnable("first")&&g.unshift(e.buildItem("first",1)),e.isEnable("statistics")&&g.unshift(e.buildItem("statistics")),e.isEnable("next")&&g.push(e.buildItem("next",e.options.currentPage+1)),e.isEnable("last")&&g.push(e.buildItem("last",e.options.totalPages)),e.$container.html("");var d=e.options.wrapper?b(e.options.wrapper).html(g.join("")).jqPaginatorHTML():g.join("");e.$container.prepend(e.options.pageShowNum);e.$container.prepend(e.options.allDataNum);e.$container.prepend(e.options.allPage);var j="<div class='num_now'>"+d+e.options.searchs+"</div>";e.$container.append(j);e.$container.find("select").val(e.options.pageShowNum_)},e.buildItem=function(d,h){var g=e.options[d].replace(/{{page}}/g,h).replace(/{{totalPages}}/g,e.options.totalPages).replace(/{{totalCounts}}/g,e.options.totalCounts);return b(g).attr({"jp-role":d,"jp-data":h}).jqPaginatorHTML()},e.setStatus=function(){var c=e.options;e.isEnable("first")&&1!==c.currentPage||b("[jp-role=first]",e.$container).addClass(c.disableClass),e.isEnable("prev")&&1!==c.currentPage||b("[jp-role=prev]",e.$container).addClass(c.disableClass),(!e.isEnable("next")||c.currentPage>=c.totalPages)&&b("[jp-role=next]",e.$container).addClass(c.disableClass),(!e.isEnable("last")||c.currentPage>=c.totalPages)&&b("[jp-role=last]",e.$container).addClass(c.disableClass),b("[jp-role=page]",e.$container).removeClass(c.activeClass),b("[jp-role=page][jp-data="+c.currentPage+"]",e.$container).addClass(c.activeClass)},e.getPages=function(){var j=[],d=e.options.visiblePages,p=e.options.currentPage,o=e.options.totalPages;d>o&&(d=o);var n=Math.floor(d/2),m=p-n+1-d%2,l=p+n;1>m&&(m=1,l=d),l>o&&(l=o,m=1+o-d);for(var k=m;l>=k;){j.push(k),k++}return j},e.isNumber=function(d){var c=typeof d;return"number"===c||"undefined"===c},e.isEnable=function(c){return e.options[c]&&"string"==typeof e.options[c]},e.switchPage=function(c){e.options.currentPage=c,e.render()},e.fireEvent=function(d,c){return"function"!=typeof e.options.onPageChange||e.options.onPageChange(d,c)!==!1},e.callMethod=function(d,g){switch(d){case"option":e.options=b.extend({},e.options,g),e.verify(),e.render();break;case"destroy":e.$container.empty(),e.$container.removeData("jqPaginator");break;default:throw new Error('[jqPaginator] method "'+d+'" does not exist')}return e.$container},e.bindEvents=function(){var c=e.options;e.$container.off(),e.$container.on("click","[jp-role]",function(){var g=b(this);if(!g.hasClass(c.disableClass)&&!g.hasClass(c.activeClass)){var d=+g.attr("jp-data");e.fireEvent(d,"change")&&e.switchPage(d)}});e.$container.find("select").on("change",function(){e.options.pageShowNum_=this.value;if(e.options.pageShowNumFun){e.options.pageShowNumFun(this.value)}});e.$container.find(".inputPage").on("keydown",function(g){var d=[49,50,51,52,53,54,55,56,57,48,8,97,98,99,100,101,102,103,104,105,96,46,39,37];if(d.indexOf(g.keyCode)!=-1){}else{g.preventDefault()}});e.$container.find(".inputPage").on("keyup",function(g){var h=$(this).val();var d=/^[0-9]*$/;if(!d.test(h)){$(this).val(h.replace(/[^0-9]*/g,""))}h=$(this).val();if(h.length>this.getAttribute("maxLength")){$(this).val(h.substring(0,this.getAttribute("maxLength")))
}});e.$container.find(".searchPage span").on("click",function(){if($(this.parentNode).find("input").val()){var d=/^[0-9]*$/;if(!d.test($(this.parentNode).find("input").val())){$(this.parentNode).find("input").val("");return 0}var g=parseInt($(this.parentNode).find("input").val());if(g<=0||g>e.options.totalPages){if(g>e.options.totalPages){$(this.parentNode).find("input").val(e.options.totalPages)}else{$(this.parentNode).find("input").val("1")}console.log("输入值错误");return 0}e.fireEvent(g,"change")&&e.switchPage(g);if(e.options.searchsFun){e.options.searchsFun()}}})},e.init(),e.$container},b.jqPaginator.defaultOptions={wrapper:"",first:'<li class="first"><a href="javascript:;">First</a></li>',prev:'<li class="prev"><a href="javascript:;">Previous</a></li>',next:'<li class="next"><a href="javascript:;">Next</a></li>',last:'<li class="last"><a href="javascript:;">Last</a></li>',page:'<li class="page"><a href="javascript:;">{{page}}</a></li>',totalPages:0,totalCounts:0,pageSize:0,currentPage:1,visiblePages:7,disableClass:"disabled",activeClass:"active",onPageChange:null},b.fn.jqPaginator=function(){var a=this,f=Array.prototype.slice.call(arguments);if("string"==typeof f[0]){var e=b(a).data("jqPaginator");if(e){return e.callMethod(f[0],f[1])}throw new Error("[jqPaginator] the element is not instantiated")}return new b.jqPaginator(this,f[0])}}(jQuery);function pageIng(b){var c=b.pageBoxClass?b.pageBoxClass:"pageFather";var a="";b.showNumArr&&(function(){a='<select style="float:left;" class="showNum form-control pagingSelect selectopt">';for(var d=0;d<b.showNumArr.length;d++){a=a+'<option class="option" value="'+b.showNumArr[d]+'"  id="optionShowNum">'+b.showNumArr[d]+"</option>"}a=a+"</select>"})();$("."+c).jqPaginator({totalPages:b.allPage,visiblePages:b.showPage,currentPage:b.nowPage,allPage:'<li class="allPage"><a href="javascript:void(0);">总页数<span class="numBerA">'+b.allPage+"</span>页</a></li>",first:'<li class="first"><a href="javascript:void(0);"></a></li>',prev:'<li class="prev"><a href="javascript:void(0);"></a></li>',next:'<li class="next"><a href="javascript:void(0);"></a></li>',last:'<li class="last"><a href="javascript:void(0);"></a></li>',page:'<li class="page"><a href="javascript:void(0);">{{page}}</a></li>',searchs:'<li class="searchPage"><input maxlength="5" placeholder="输入页数" type="text" class="inputPage" /><span class="span">跳转</span></li>',pageShowNum:'<li class="selectLi pull-left"><span style="float:left;" class="selectSpan">每页条数</span>'+a+"</li>",allDataNum:"<li class='allDataNum'><a href='javascript:void(0);'>总条数<span class=\"numBerA\">"+b.allDataNum+"</span>条</a></li>",pageShowNum_:b.showNum,onPageChange:function(d,e){b.pageFun(d,e)},searchsFun:function(d){},pageShowNumFun:function(d){b.showNumFun(d)}})}var page={};page.paging=function(d,a){var c=d.responseText;var b=xmlPageToJson(c);pageIng({allDataNum:parseInt(b.allDataNum),showNum:parseInt(b.showNum),showNumArr:b.showNumArr.split(","),pageBoxClass:"pageFather",allPage:parseInt(b.allPage),showPage:b.showPage,nowPage:parseInt(b.nowPage),pageFun:function(e,f){if(f=="change"){a(e+"",b.showNum)}},showNumFun:function(e){a(1,e)}})};